$(function(){"use strict";function a(a){for(var b=1e6;b>=10;b/=10)if(a>10*b)return Math.round(a/b)*b;return Math.round(a)}function b(b){var c={M:1e6,K:1e3};for(var d in c)if(b>c[d])return a(b)/c[d]+d;return Math.round(b)}function c(a){h.height=d.height(),h.width=d.width(),i.clearRect(0,0,h.width,h.height),i.fillStyle=i.createPattern(a,"repeat"),i.beginPath(),i.rect(0,0,h.width,h.height),i.fill()}var d=$(document),e=$(".cropper").find("img"),f=$("#values"),g=$("#download"),h=document.getElementById("canvas"),i=h.getContext("2d"),j=$("#fileinput"),k=e.attr("src").split("/").pop(),l="image/"+k.split(".").pop();$(window).on("resize",function(){c(e.cropper("getCroppedCanvas"))}),e.cropper({crop:function(a){f.find("#sx").text(Math.round(a.x)+"px").end().find("#sy").text(Math.round(a.y)+"px").end().find("#sh").text(Math.round(a.height)+"px").end().find("#sw").text(Math.round(a.width)+"px").end().find("#sr").html(Math.round(10*a.rotate)/10+"&deg;");var b=e.cropper("getCroppedCanvas");g.on("click",function(){var a=b.toDataURL(l,1);$(this).attr({href:a,download:k})}),c(b)}}),$("#cropControls").find("button").on("click",function(){var a=$(this).data("action"),b=+$(this).data("value");e.cropper(a,b)}),$("#toggle").on("click",function(){var a=$(this).find("i"),b=$(this).parents(".cropper"),c=a.hasClass("icon-left");c?(b.animate({left:-b.outerWidth()}),a.removeClass().addClass("icon-right")):(b.animate({left:0}),a.removeClass().addClass("icon-left"))}),$("#info").on("click",function(a){a.preventDefault(),$("body").toggleClass("showModal")}),$(".closeModal").on("click",function(a){a.preventDefault(),$("body").removeClass("showModal")});var m=window.URL||window.webkitURL;m?j.on("change",function(){var a,b=this.files;if(b&&b.length)if(a=b[0],l=a.type,k=a.name,/^image\/\w+$/.test(l)){var c=m.createObjectURL(a);e.one("built.cropper",function(){m.revokeObjectURL(c)}).cropper("reset",!0).cropper("replace",c),j.val("")}else alert("Please choose an image file.")}):j.on("click",function(a){a.preventDefault(),alert("The features required to make this work aren't supported in your browser :(. Try Chrome, maybe?")}),$(".social-likes").socialLikes().on("counter.social-likes",function(a,c,d){d>0&&$(".social-likes__counter_"+c).text(b(d))})});